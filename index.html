<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
  <title>Cat Pilots Plus</title>
  <script src="./node_modules/cesium/Build/Cesium/Cesium.js"></script>
  <style>
      @import url(./node_modules/cesium/Build/Cesium/Widgets/widgets.css);
      html, body, #cesiumContainer {
          height: 100%; margin: 0; padding: 0; overflow: hidden;
      }
  </style>
</head>
<body>
  <div id="cesiumContainer"></div>
  <script>

    var viewer = new Cesium.Viewer('cesiumContainer');

    var terrainProvider = new Cesium.CesiumTerrainProvider({
        url : '//assets.agi.com/stk-terrain/world'
    });
    viewer.terrainProvider = terrainProvider;

    var scene = viewer.scene;
    
    var modelMatrix = Cesium.Transforms.eastNorthUpToFixedFrame(
        Cesium.Cartesian3.fromDegrees(-75.62898254394531, 40.02804946899414, 1000000));
    var model = scene.primitives.add(Cesium.Model.fromGltf({
        url : './cat-4.gltf',
        modelMatrix : modelMatrix,
        scale : 20000
    }));

    viewer.extend(Cesium.viewerCesiumInspectorMixin);

    var handler = new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);

    handler.setInputAction(function(click) {
        var pickedObject = viewer.scene.pick(click.position);
        if (Cesium.defined(pickedObject)) {
            var entityId = pickedObject.id._id;
            var oldColor = buildingMap.get(entityId).polygon.material.color;
            buildingMap.get(entityId).polygon.material.color = pickColor;
            selectedEntity.set(entityId, oldColor);

            var currentLayer = viewer.scene.imageryLayers.get(1);
            if (typeof currentLayer !== 'undefined') {
                var info = currentLayer._imageryProvider._tileProvider.getTileCredits(click.position.x, click.position.y, 0);
            }
        }
        console.log(click.position)
    }, Cesium.ScreenSpaceEventType.LEFT_CLICK);

  </script>
</body>
</html>